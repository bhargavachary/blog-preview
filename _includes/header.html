<nav
    class="navbar is-primary {% if site.fixed_navbar %} is-fixed-{{ site.fixed_navbar }} {% endif %}"
    x-data="{ openNav: false }"
>
    <div class="container">
        <div class="navbar-brand">
            <a href="{{ site.baseurl }}/" class="navbar-item">
                {{ site.title }}
            </a>
            <!-- Theme toggle for mobile (always visible on right) -->
            <a id="theme-toggle-mobile" class="navbar-item theme-toggle-item theme-toggle-mobile" role="button" tabindex="0" style="margin-left: auto; order: 2;">
                <span class="icon theme-icon-light">
                    <i class="fas fa-sun"></i>
                </span>
                <span class="icon theme-icon-dark">
                    <i class="fas fa-moon"></i>
                </span>
                <span class="theme-toggle-text-light">Light</span>
                <span class="theme-toggle-text-dark">Dark</span>
            </a>
            <a
                role="button"
                class="navbar-burger burger"
                aria-label="menu"
                aria-expanded="false"
                data-target="navMenu"
                :class="{ 'is-active': openNav }"
                x-on:click="openNav = !openNav"
                style="order: 3;"
            >
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu" id="navMenu" :class="{ 'is-active': openNav }">
            <div class="navbar-start greedy-nav">
                <ul class="visible-links">
                {% if site.data.navigation %}
                    {% for item in site.data.navigation %}
                        <li class="navbar-item-wrapper">
                            {% if item.dropdown %}
                                <div class="navbar-item has-dropdown is-hoverable {% if site.fixed_navbar == 'bottom' %} has-dropdown-up {% endif %}">
                                    <a
                                        href="{{ item.link | relative_url }}"
                                        class="navbar-link {% if page.url contains item.link %}is-active{% endif %}"
                                    >
                                        {{- item.name -}}
                                    </a>
                                    <div class="navbar-dropdown">
                                        {% for subitem in item.dropdown %}
                                            <a
                                                href="{{ subitem.link | relative_url }}"
                                                class="navbar-item {% if subitem.link == page.url %}is-active{% endif %}"
                                            >
                                                {{- subitem.name -}}
                                            </a>
                                        {% endfor %}
                                    </div>
                                </div>
                            {% else %}
                                <a
                                    href="{{ item.link | relative_url }}"
                                    class="navbar-item {% if item.link == page.url %}is-active{% endif %}"
                                >
                                    {{- item.name -}}
                                </a>
                            {% endif %}
                        </li>
                    {% endfor %}
                {% endif %}
                </ul>

                <button class="navbar-item greedy-nav-btn hidden" type="button">
                    <span class="greedy-nav-label">More</span>
                    <span class="greedy-nav-icon"></span>
                </button>

                <ul class="hidden-links"></ul>
            </div>

            <div class="navbar-end">
                <!-- Theme toggle for desktop/tablet (right side of menu) -->
                <a id="theme-toggle-desktop" class="navbar-item theme-toggle-item theme-toggle-desktop" role="button" tabindex="0">
                    <span class="icon theme-icon-light">
                        <i class="fas fa-sun"></i>
                    </span>
                    <span class="icon theme-icon-dark">
                        <i class="fas fa-moon"></i>
                    </span>
                    <span class="theme-toggle-text-light">Light</span>
                    <span class="theme-toggle-text-dark">Dark</span>
                </a>
                {% if site.gh_sponsor %}
                    <a class="navbar-item" href="https://github.com/sponsors/{{ site.gh_sponsor }}">
                        <span class="icon gh-sponsor"><i class="fas fa-heart"></i></span>
                        <span>Sponsor</span>
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
</nav>
